<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Hello World Function</title>
  <link rel="stylesheet" href="https://unpkg.com/@appwrite.io/pink@0" />
  <script src="//unpkg.com/alpinejs" defer></script>
</head>
<body class="theme-dark">
  <main class="main-content">
    <div class="top-cover u-padding-block-end-56">
      <div class="container">
        <h1 class="heading-level-1 u-margin-block-start-16">ðŸŽ‰ Hello World Function</h1>
        <p class="body-text-1 u-normal u-margin-block-start-8">
          Congratulations! Your function is working and has a domain!
        </p>
      </div>
    </div>
    
    <div x-data="helloWorld()" class="container u-margin-block-start-negative-56">
      <div class="card">
        <h2 class="heading-level-4">Test the Function</h2>
        <p class="text u-margin-block-start-8">
          Enter your name and click the button to test the POST endpoint.
        </p>
        
        <div class="u-margin-block-start-16">
          <input 
            x-model="name"
            type="text"
            class="input-text"
            placeholder="Enter your name"
            @keyup.enter="callFunction"
          />
        </div>
        
        <button 
          @click="callFunction"
          class="button is-primary u-margin-block-start-16"
          :disabled="loading"
        >
          <span x-show="!loading">Say Hello!</span>
          <span x-show="loading">Loading...</span>
        </button>
        
        <div x-show="response" class="u-margin-block-start-24">
          <h3 class="heading-level-6">Response:</h3>
          <pre class="code u-margin-block-start-8" x-text="response"></pre>
        </div>
        
        <div x-show="error" class="u-margin-block-start-24">
          <div class="alert is-danger">
            <span x-text="error"></span>
          </div>
        </div>
      </div>
      
      <div class="card u-margin-block-start-24">
        <h2 class="heading-level-4">Function Info</h2>
        <ul class="list u-margin-block-start-16">
          <li class="list-item">âœ… Function is deployed</li>
          <li class="list-item">âœ… Domain is configured</li>
          <li class="list-item">âœ… GET endpoint returns this HTML page</li>
          <li class="list-item">âœ… POST endpoint returns JSON response</li>
        </ul>
        
        <div class="u-margin-block-start-16">
          <p class="text"><strong>Function URL:</strong></p>
          <code class="code" x-text="window.location.origin"></code>
        </div>
      </div>
    </div>
  </main>
  
  <script>
    function helloWorld() {
      return {
        name: '',
        response: '',
        error: '',
        loading: false,
        
        async callFunction() {
          this.loading = true;
          this.error = '';
          this.response = '';
          
          try {
            const result = await fetch(window.location.href, {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json'
              },
              body: JSON.stringify({
                name: this.name || 'Anonymous'
              })
            });
            
            const data = await result.json();
            this.response = JSON.stringify(data, null, 2);
          } catch (err) {
            this.error = 'Error: ' + err.message;
          } finally {
            this.loading = false;
          }
        }
      }
    }
  </script>
</body>
</html>